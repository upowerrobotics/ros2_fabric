<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FABRIC: FABRIC User Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FABRIC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">FABRIC User Documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This document describes how to operate the <a href="https://www.ros.org">ROS2</a> package named <a href="https://github.com/upowerrobotics/ros2_fabric">fabric_nodes</a>.</p>
<p>FABRIC is a tool designed for the evaluation of end-to-end transmission statistics in a ROS environment. <br  />
 This package allows users to establish a virtual environment that mirrors their implementation, facilitating the measurement of transmission latency, frequency, and bandwidth in the ROS2 layer.</p>
<p>FABRIC is compatible with any middleware boasting an RMW implementation with topic support. Furthermore, it is capable of gauging latency within the rmw layer. However, measuring latency in the RMW layer requires FABRIC-specific hooks which is why we have our own forks of the RMW implementations. <br  />
</p>
<p>To measure latency in the rmw layer, users are required to download and compile our own forks of the RMW implementations for each middleware. Our own forks of the RMW implementations: <a href="https://github.com/upowerrobotics/rmw_cyclonedds">rmw_cyclonedds</a>, <a href="https://github.com/upowerrobotics/rmw_fastrtps">rmw_fastrtps</a>, and <a href="https://github.com/upowerrobotics/rmw_ecal">rmw_ecal</a>.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
1. Quick Start</h1>
<ul>
<li>Launch <b>fabric_node</b> in the terminal. <br  />
 After waiting for roughly 1 minute, kill the node: <div style="width: auto; white-space: nowrap;"> <pre>
ros2 launch <a class="el" href="namespacefabric__nodes.html" title="Namespace containing classes and functions for the fabric nodes.">fabric_nodes</a> fabric_nodes.launch.py
</pre> </div></li>
<li>Run get_log.py to retrieve the evaluation. <br  />
 The analyized csv file will be saved in the folder where the user runs this command: <br  />
 <div style="width: auto; white-space: nowrap;"> <pre>
ros2 run <a class="el" href="namespacefabric__nodes.html" title="Namespace containing classes and functions for the fabric nodes.">fabric_nodes</a> get_log.py
</pre> </div></li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
2. System Structure Workflow (Default Config File)</h1>
<p>The system follows a sequential workflow to process and output various metrics related to latency, frequency, and bandwidth. Here's a step-by-step breakdown:</p>
<h2><a class="anchor" id="autotoc_md3"></a>
2-1. Initialization:</h2>
<p>Execute <b>fabric_nodes.launch.py</b> which:</p>
<ul>
<li>Reads the configuration from <b>config/example.yaml</b>:<ul>
<li>For details on the config structure, refer to <a class="el" href="YAML_API.html">ROS2 FABRIC YAML API</a>.</li>
</ul>
</li>
<li>Validates the yaml structure with <a class="el" href="classfabric__nodes_1_1config2node_1_1Config2Nodes.html">Config2Nodes Class</a>.</li>
<li>Sets up nodes and topics using <a class="el" href="classfabric__nodes_1_1DummyNode.html">DummyNode Class</a>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md4"></a>
2-2. Output Metrics:</h2>
<p><a class="el" href="classfabric__nodes_1_1DummyNode.html">DummyNode Class</a> outputs metrics:</p>
<ul>
<li>Metrics: latency, frequency, and bandwidth.</li>
<li>Logging: Uses <a href="https://docs.ros2.org/bouncy/api/rclcpp/logging_8hpp.html">RCLCPP_DEBUG</a>.</li>
<li>Location: ROS log folder (by default ~/.ros/log on Linux systems)</li>
</ul>
<h2><a class="anchor" id="autotoc_md5"></a>
2-3. RMW Layer Output (Conditional):</h2>
<ul>
<li>If the user installs the custom <code>rmw_implementation</code>, the <b>rmw_layer</b> also logs latency, frequency, and bandwidth.<ul>
<li>Logging: Uses <a href="https://docs.ros2.org/bouncy/api/rclcpp/logging_8hpp.html">RCLCPP_DEBUG</a>.</li>
<li>Location: ROS log folder (by default ~/.ros/log on Linux systems)</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md6"></a>
2-4. Log Extraction:</h2>
<ul>
<li><a class="el" href="classfabric__nodes_1_1get__log_1_1GetLog.html">GetLog Class</a> processes the logs:<ul>
<li>Reads from ROS log folder (by default ~/.ros/log on Linux systems).</li>
<li>Extracts: latency, frequency, and bandwidth for each topic.</li>
<li>Save the analyized csv file to where the user runs <a class="el" href="classfabric__nodes_1_1get__log_1_1GetLog.html">GetLog Class</a>.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md7"></a>
3. User Configuration YAML for Evaluation</h1>
<p>Follow these steps to set up and utilize your custom <b>config.yaml</b>:</p>
<h2><a class="anchor" id="autotoc_md8"></a>
3-1. Setup Configuration</h2>
<ul>
<li>Create a <b>config.yaml</b> tailored to your environment.</li>
<li>Ensure it adheres to the required format; otherwise, <a class="el" href="classfabric__nodes_1_1config2node_1_1Config2Nodes.html">Config2Nodes Class</a> will throw a <b>ValueError</b>.</li>
<li>Each environment object defines a compute environment, whether that is an Operating System, SoC, ECU, or ROS environment. All nodes in a single environment will be launched together.</li>
<li>For more details on the <b>config.yaml</b> structure, please refer to <a class="el" href="YAML_API.html">ROS2 FABRIC YAML API</a>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md9"></a>
3-2. Execute Configuration</h2>
<ul>
<li>Run the command below to apply your <b>config.yaml</b>.</li>
<li>Use the environment argument to set the compute environment.</li>
<li>Make sure killing the node after 1 minute. <div style="width: auto; white-space: nowrap;"> <pre>
ros2 launch <a class="el" href="namespacefabric__nodes.html" title="Namespace containing classes and functions for the fabric nodes.">fabric_nodes</a> fabric_nodes.launch.py config-path:=/PATH/TO/USER/CONFIG environment:=USER_ENV
</pre> </div></li>
</ul>
<h2><a class="anchor" id="autotoc_md10"></a>
3-3. Extract Measurements</h2>
<p>To fetch the measurements from the ROS log folder (by default ~/.ros/log on Linux systems), use: </p><div style="width: auto; white-space: nowrap;"> <pre>
ros2 run <a class="el" href="namespacefabric__nodes.html" title="Namespace containing classes and functions for the fabric nodes.">fabric_nodes</a> get_log.py
</pre> </div> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
